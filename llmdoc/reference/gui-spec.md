# GUI 设计规范

## 设计理念

### 核心原则

1. **无感存在 (Invisible by Default)**
   - 应用 99% 时间在后台运行
   - 用户只在需要时才打开界面

2. **信息密度 (Information Dense)**
   - 时间线视图需展示大量截图
   - 搜索结果需高效浏览

3. **隐私可视化 (Privacy Visible)**
   - 随时显示录制状态
   - 清晰展示过滤的内容

## 应用结构

```
┌─────────────────────────────────────────────────────────────────┐
│  [托盘图标]  ←── 主要交互入口                                     │
│       │                                                         │
│       ├── 右键菜单                                               │
│       │     ├── 暂停/恢复录制                                    │
│       │     ├── 打开主窗口                                       │
│       │     ├── 设置                                            │
│       │     └── 退出                                            │
│       │                                                         │
│       └── 双击 → 打开主窗口                                      │
│                                                                 │
│  [主窗口]                                                        │
│       │                                                         │
│       ├── 时间线 (Timeline)     ← 默认页面                       │
│       ├── 搜索 (Search)                                         │
│       ├── 摘要 (Summaries)      ← Phase 3                       │
│       └── 设置 (Settings)                                       │
└─────────────────────────────────────────────────────────────────┘
```

## 页面设计

### 1. 时间线页面 (Timeline)

**布局**:
```
┌─────────────────────────────────────────────────────────────────┐
│  ◀  2024年12月14日  ▶     [今天]            🔍 搜索  ⚙️ 设置    │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│  09:00 ─────────────────────────────────────────────────────    │
│  ┌─────────┐ ┌─────────┐ ┌─────────┐ ┌─────────┐               │
│  │ VS Code │ │ Chrome  │ │ Chrome  │ │ Terminal│               │
│  │  main.rs│ │ 文档    │ │  搜索   │ │  build  │               │
│  │ [缩略图] │ │ [缩略图] │ │ [缩略图] │ │ [缩略图] │               │
│  │ 09:00:02│ │ 09:02:15│ │ 09:05:30│ │ 09:08:45│               │
│  └─────────┘ └─────────┘ └─────────┘ └─────────┘               │
│                                                                 │
│  10:00 ─────────────────────────────────────────────────────    │
│  ┌─────────┐ ┌─────────┐ ┌─────────┐                           │
│  │ Slack   │ │ Notion  │ │ VS Code │  ...                      │
│  └─────────┘ └─────────┘ └─────────┘                           │
│                                                                 │
│  ... (可滚动)                                                   │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

**交互**:
- 点击缩略图 → 打开大图预览 (Modal)
- 大图预览支持左右键切换
- Modal 右上角 `×` 关闭（点击遮罩也可关闭）
- 支持按小时折叠/展开
- 支持按应用筛选
- Session 卡片优先展示 `title + description`（隐藏原始上下文，避免噪音）

**缩略图卡片**:
```
┌───────────────────┐
│                   │
│     [截图缩略图]   │  ← 固定宽高比 16:10
│      160x100      │
│                   │
├───────────────────┤
│ 📱 VS Code        │  ← 应用图标 + 名称
│ main.rs - engram  │  ← 窗口标题 (截断)
│ 09:00:02          │  ← 时间戳
└───────────────────┘
```

### 2. 搜索页面 (Search)

**布局**:
```
┌─────────────────────────────────────────────────────────────────┐
│  🔍 [________________________] [搜索]    ⚙️ 高级选项 ▼           │
│                                                                 │
│  筛选: [今天 ▼] [所有应用 ▼]  排序: [相关度 ▼]   共 42 条结果    │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│  ┌───────────────────────────────────────────────────────────┐  │
│  │ [缩略图]  VS Code - main.rs           2024-12-14 09:15:30 │  │
│  │           "...impl **ScreenCapture** for Windows..."      │  │
│  │           匹配度: 95%                           [查看详情] │  │
│  └───────────────────────────────────────────────────────────┘  │
│                                                                 │
│  ┌───────────────────────────────────────────────────────────┐  │
│  │ [缩略图]  Chrome - Rust 文档           2024-12-14 09:18:22 │  │
│  │           "...**scap** is a cross-platform **screen**..." │  │
│  │           匹配度: 87%                           [查看详情] │  │
│  └───────────────────────────────────────────────────────────┘  │
│                                                                 │
│  ...                                                            │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

**搜索结果卡片**:
- 左侧缩略图
- 右侧显示应用、标题、时间
- 显示匹配的 OCR 文本片段 (高亮关键词)
- 显示相关度分数

**高级选项**:
- 时间范围选择
- 应用过滤
- 全文/语义搜索切换

### 3. 摘要页面 (Summaries) - Phase 3

**布局**:
```
┌─────────────────────────────────────────────────────────────────┐
│  📋 摘要  [15分钟 | 1小时 | 每日]          2024-12-14           │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│  ┌───────────────────────────────────────────────────────────┐  │
│  │ 📅 09:00 - 09:15                                  [展开 ▼] │  │
│  │                                                           │  │
│  │ 在 VS Code 中开发 Engram 项目的屏幕捕获模块，            │  │
│  │ 主要实现了 Windows 平台的截图功能...                      │  │
│  │                                                           │  │
│  │ 🏷️ #Rust #Engram #屏幕捕获                               │  │
│  │ 👤 @Alice (Slack 对话)                                    │  │
│  │ 🔗 https://docs.rs/scap                                   │  │
│  └───────────────────────────────────────────────────────────┘  │
│                                                                 │
│  ┌───────────────────────────────────────────────────────────┐  │
│  │ 📅 09:15 - 09:30                                          │  │
│  │ ...                                                       │  │
│  └───────────────────────────────────────────────────────────┘  │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

### 4. 设置页面 (Settings)

**布局**:
```
┌─────────────────────────────────────────────────────────────────┐
│  ⚙️ 设置                                                        │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│  📸 捕获设置                                                    │
│  ├─ 截图间隔: [2秒 ▼]                                          │
│  ├─ 闲置阈值: [30秒 ▼]                                         │
│  └─ 相似度阈值: [5 ▼] (越小越严格)                              │
│                                                                 │
│  🚫 隐私设置                                                    │
│  ├─ 应用黑名单                                                  │
│  │   ┌────────────────────────────────────┐                    │
│  │   │ ☑️ 1Password                        │                    │
│  │   │ ☑️ Bitwarden                        │                    │
│  │   │ ☐ Slack                            │                    │
│  │   │ [+ 添加应用]                        │                    │
│  │   └────────────────────────────────────┘                    │
│  ├─ 标题关键词黑名单                                            │
│  │   ┌────────────────────────────────────┐                    │
│  │   │ Incognito, Private, InPrivate      │                    │
│  │   └────────────────────────────────────┘                    │
│  └─ 语义黑名单 (Phase 3)                                        │
│      ┌────────────────────────────────────┐                    │
│      │ 涉及银行账户的内容                   │                    │
│      │ 包含密码的页面                       │                    │
│      │ [+ 添加描述]                        │                    │
│      └────────────────────────────────────┘                    │
│                                                                 │
│  💾 存储设置                                                    │
│  ├─ 数据目录: ~/.engram  [更改...]                             │
│  ├─ 热数据保留: [7天 ▼]                                        │
│  ├─ 温数据保留: [30天 ▼]                                       │
│  └─ 当前占用: 2.3 GB  [清理...]                                │
│                                                                 │
│  🤖 AI 设置 (Phase 2-3)                                        │
│  ├─ OCR 模型: PaddleOCR v4                                     │
│  ├─ 嵌入模型: MiniLM-L6-v2                                     │
│  └─ LLM 模型: [选择模型...] (用于摘要)                          │
│                                                                 │
│  🔌 集成 (Phase 4)                                             │
│  └─ MCP 服务: [启用 ▼]  端口: 3000                             │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

## 系统托盘

### 图标状态

| 状态 | 图标 | 描述 |
|------|-----|------|
| 正常录制 | 🟢 | 绿色实心圆 |
| 已暂停 | ⏸️ | 黄色暂停符号 |
| 闲置中 | 💤 | 灰色月亮 |
| 错误 | 🔴 | 红色实心圆 |

### 右键菜单

```
┌────────────────────┐
│ ⏸️ 暂停录制        │
│ ──────────────────│
│ 📊 打开主窗口      │
│ 🔍 快速搜索...     │
│ ──────────────────│
│ ⚙️ 设置           │
│ ❓ 帮助           │
│ ──────────────────│
│ ❌ 退出           │
└────────────────────┘
```

## 颜色规范

### 主色调 (Dark Mode 优先)

| 用途 | 颜色 | Hex |
|------|-----|-----|
| 背景 (主) | 深灰 | #1a1a1a |
| 背景 (次) | 中灰 | #2d2d2d |
| 背景 (卡片) | 浅灰 | #3d3d3d |
| 文字 (主) | 白色 | #ffffff |
| 文字 (次) | 灰色 | #a0a0a0 |
| 强调色 | 蓝色 | #3b82f6 |
| 成功 | 绿色 | #22c55e |
| 警告 | 黄色 | #eab308 |
| 错误 | 红色 | #ef4444 |

### Light Mode

| 用途 | 颜色 | Hex |
|------|-----|-----|
| 背景 (主) | 白色 | #ffffff |
| 背景 (次) | 浅灰 | #f5f5f5 |
| 背景 (卡片) | 纯白 | #ffffff |
| 文字 (主) | 黑色 | #1a1a1a |
| 文字 (次) | 灰色 | #6b7280 |

## 字体规范

```css
/* 系统字体栈 */
font-family:
  -apple-system,
  BlinkMacSystemFont,
  "Segoe UI",
  Roboto,
  "Helvetica Neue",
  Arial,
  "Noto Sans SC",  /* 中文回退 */
  sans-serif;

/* 等宽字体 (代码/时间戳) */
font-family:
  ui-monospace,
  SFMono-Regular,
  "SF Mono",
  Menlo,
  Consolas,
  monospace;
```

### 字号规范

| 元素 | 大小 | 行高 |
|------|-----|------|
| 页面标题 | 24px | 32px |
| 区块标题 | 18px | 28px |
| 正文 | 14px | 22px |
| 辅助文字 | 12px | 18px |
| 时间戳 | 11px | 16px |

## 响应式设计

### 窗口尺寸

| 断点 | 宽度 | 布局调整 |
|------|-----|---------|
| 最小 | 800px | 单列布局 |
| 默认 | 1200px | 双列布局 |
| 大屏 | 1600px+ | 三列布局 |

### 缩略图网格

```css
/* 自适应网格 */
.thumbnail-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(160px, 1fr));
  gap: 12px;
}
```

## 动画规范

```css
/* 过渡时长 */
--transition-fast: 150ms;
--transition-normal: 250ms;
--transition-slow: 350ms;

/* 缓动函数 */
--ease-out: cubic-bezier(0.33, 1, 0.68, 1);
--ease-in-out: cubic-bezier(0.65, 0, 0.35, 1);
```

### 动画场景

| 场景 | 时长 | 缓动 |
|------|-----|------|
| 按钮 hover | 150ms | ease-out |
| 卡片 hover | 200ms | ease-out |
| Modal 打开 | 250ms | ease-out |
| Modal 关闭 | 200ms | ease-in |
| 页面切换 | 300ms | ease-in-out |

## 快捷键

| 功能 | Windows/Linux | macOS |
|------|--------------|-------|
| 全局搜索 | Ctrl+K | Cmd+K |
| 刷新 | F5 | Cmd+R |
| 设置 | Ctrl+, | Cmd+, |
| 关闭窗口 | Ctrl+W | Cmd+W |
| 退出应用 | Alt+F4 | Cmd+Q |
